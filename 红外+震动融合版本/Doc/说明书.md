# 安装



# 设置

### 传感器灵敏度

#### 光敏传感器

<img src="https://wpcos-1300629776.cos.ap-chengdu.myqcloud.com/Gallery/2021/03/21/qq_pic_merged_1616314724530.jpg" alt="qq_pic_merged_1616314724530.jpg" style="zoom:50%;" />

1. 遮挡时：尾部亮红灯。
2. 未遮挡时：尾部不亮灯。

光电传感器距离设置：尾部旋钮，触发距离左旋变近，右旋变远。

#### 震动传感器

<img src="https://wpcos-1300629776.cos.ap-chengdu.myqcloud.com/Gallery/2021/03/21/imaged071197afbec288e.png" alt="imaged071197afbec288e.png" style="zoom:50%;" />

1. 不震动时：震动开关呈断开状态，输出端输出高电平，绿色指示灯不亮;
2. 震动时：震动开关瞬间导通，输出端输出低电平，绿色指示灯亮;

震动传感器灵敏度调节：右旋增加灵敏度，左旋减小灵敏度。



## 固件烧写

#### 硬件接口

USB-TTL连接器：

<img src="https://wpcos-1300629776.cos.ap-chengdu.myqcloud.com/Gallery/2021/03/21/image5db1d1630924577e.png" alt="image5db1d1630924577e.png" style="zoom:50%;" />

**MCU接口：**

**TX与RX接线口**

<img src="https://wpcos-1300629776.cos.ap-chengdu.myqcloud.com/Gallery/2021/03/21/imagee9e3c77ab141ae39.png" alt="imagee9e3c77ab141ae39.png" style="zoom: 33%;" />

**电源与地接口**

<img src="https://wpcos-1300629776.cos.ap-chengdu.myqcloud.com/Gallery/2021/03/21/image2a8a35e8e4df3656.png" alt="image2a8a35e8e4df3656.png" style="zoom:33%;" />

**启动模式跳帽**

正常运行模式

BOOT 0 = 0;
BOOT 1 = 0;

<img src="https://wpcos-1300629776.cos.ap-chengdu.myqcloud.com/Gallery/2021/03/21/image8d44122503b38095.png" alt="image8d44122503b38095.png" style="zoom:50%;" />

固件烧写模式

BOOT 0 = 1;
BOOT 1 = 0;

<img src="https://wpcos-1300629776.cos.ap-chengdu.myqcloud.com/Gallery/2021/03/21/image61518610404b1bde.png" alt="image61518610404b1bde.png" style="zoom:50%;" />

**烧写软件下载：[FLYMCU](https://wpcos-1300629776.cos.ap-chengdu.myqcloud.com/files/FLYMCU.zip)**

#### 烧写步骤

1. 先断电，再将跳帽置为“固件烧写模式”；

2. USB-TTL(RX)----->MCU(TX)
   USB-TTL(TX)----->MCU(RX)
   USB-TTL(3V3)----->MCU(3V3)
   USB-TTL(GND)----->MCU(GND)

3. 开启软件

   ![imagec60835b5be8ccd62.png](https://wpcos-1300629776.cos.ap-chengdu.myqcloud.com/Gallery/2021/03/21/imagec60835b5be8ccd62.png)
   按此方式进行设置。

4. 点击“开始编程”
   ![image20a2888caf9409db.png](https://wpcos-1300629776.cos.ap-chengdu.myqcloud.com/Gallery/2021/03/21/image20a2888caf9409db.png)
   出现右框图内容则说明烧写成功。

5. 恢复跳帽至正常运行模式。

6. 断电重启。

## WIFI连接

### 调试模式

#### 核心板

输入调试固件。

#### 上位机WIFI

1. 插入WiFi调试器，在串口助手中找到串口。

2. 一行一行输入以下命令，看到返回OK后输入下一行。

   ```
   AT+RST
   AT+CWMODE=2
   AT+CWSAP="WuhuTakeOff","uestc404",11,4
   AT+CIPAP="192.168.4.1","192.168.4.1","255.255.255.0"
   AT+CIPMUX=1
   AT+CIPSERVER=1,8080
   ```

3. 上位机设置完成。

#### 被测试模块

1. 插入WiFi调试器，在串口助手中找到串口。

2. 一行一行输入以下命令，看到返回OK后输入下一行。

   ```
   AT+RST
   AT+CWMODE=1
   AT+CWJAP="WuhuTakeOff","uestc404"
   AT+CIPMUX=0
   ```

3. 插回板子。
4. 核心板断电重启。

**观察上位机串口是否收到正确的传输信息。**



### 正常运行模式

1. 刷入正常运行固件（固件中需要写入IP和Port）

2. 插入WiFi调试器，在串口助手中找到串口。

3. 一行一行输入以下命令，看到返回OK后输入下一行。

```
AT+RST
AT+CWMODE=1
AT+CWJAP="SSID","PASSWORD"
AT+CIPMUX=0
```

4. 插回板子。

5. 核心板断电重启。

## 后端交互

接口定义如下：

```
投篮：{"type":"shot","sn":"HB202005V010001"}\n
进球：{"type":"goal","sn":"HB202005V010001"}\n
```

